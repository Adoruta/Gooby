#!/bin/bash

source /opt/GooPlex/menus/variables.sh

if [ "$EUID" -ne 0 ]; then

	if [ ! -e $CONFIGS/Docker/.env ]; then
		echo "${YELLOW}It seems this is the first time you're running GooPlex...${STD}"
		echo "${YELLOW}Please hang tight while we get some things ready!${STD}" && sleep 5
		source /opt/GooPlex/install/server/docker-install.sh
		sudo mkdir -p $CONFIGS/.config
		sudo mkdir -p $CONFIGS/Docker/components
		sudo chown -R $USER:$USER $CONFIGS
		echo "None" > $CONFIGS/.config/mydomain
		echo "None" > $CONFIGS/.config/myemail
		sudo rsync -a /opt/GooPlex/scripts/components/00* $CONFIGS/Docker/components
		sudo rsync -a /opt/GooPlex/scripts/components/01* $CONFIGS/Docker/components
		source /opt/GooPlex/install/misc/environment-build.sh

	fi
	
	/opt/GooPlex/menus/main.sh

else

	/opt/GooPlex/install/server/user-create.sh

fi
